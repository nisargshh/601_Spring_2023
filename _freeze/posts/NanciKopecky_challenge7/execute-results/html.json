{
  "hash": "ccb3316862341da0ed6163e1d49fe55b",
  "result": {
    "markdown": "---\ntitle: \"Challenge 7 Instructions\"\nauthor: \"Nanci Kopecky\"\ndescription: \"Visualizing Multiple Dimensions\"\ndate: \"04/19/23\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_7\n  - abc_poll\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  mutate variables as needed (including sanity checks)\n4)  Recreate at least two graphs from previous exercises, but introduce at least one additional dimension that you omitted before using ggplot functionality (color, shape, line, facet, etc) The goal is not to create unneeded [chart ink (Tufte)](https://www.edwardtufte.com/tufte/), but to concisely capture variation in additional dimensions that were collapsed in your earlier 2 or 3 dimensional graphs.\n\n-   Explain why you choose the specific graph type\n\n5)  If you haven't tried in previous weeks, work this week to make your graphs \"publication\" ready with titles, captions, and pretty axis labels and other viewer-friendly features\n\n[R Graph Gallery](https://r-graph-gallery.com/) is a good starting point for thinking about what information is conveyed in standard graph types, and includes example R code. And anyone not familiar with Edward Tufte should check out his [fantastic books](https://www.edwardtufte.com/tufte/books_vdqi) and [courses on data visualizaton.](https://www.edwardtufte.com/tufte/courses)\n\n(be sure to only include the category tags for the data you use!)\n\n## Read in data\n\n-   abc_poll ⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nabcpoll <- read.csv(file = \"_data/abc_poll_2021.csv\",\n                header=TRUE,\n                sep = \",\"\n                )\n#abcpoll\n```\n:::\n\n\n### Briefly describe the data\n\nThe data set is a 2021 ABC poll that include demographics such as age, education, employment, ethnicity, political opinions, and geographic area.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(abcpoll)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       id xspanish complete_status ppage\n1 7230001  English       qualified    68\n2 7230002  English       qualified    85\n3 7230003  English       qualified    69\n4 7230004  English       qualified    74\n5 7230005  English       qualified    77\n6 7230006  English       qualified    70\n                                                           ppeduc5\n1 High school graduate (high school diploma or the equivalent GED)\n2                                             Bachelor\\x92s degree\n3 High school graduate (high school diploma or the equivalent GED)\n4                                             Bachelor\\x92s degree\n5 High school graduate (high school diploma or the equivalent GED)\n6                                             Bachelor\\x92s degree\n                    ppeducat ppgender              ppethm pphhsize\n1                High school   Female White, Non-Hispanic        2\n2 Bachelors degree or higher     Male White, Non-Hispanic        2\n3                High school     Male White, Non-Hispanic        2\n4 Bachelors degree or higher   Female White, Non-Hispanic        1\n5                High school     Male White, Non-Hispanic        3\n6 Bachelors degree or higher     Male White, Non-Hispanic        2\n                ppinc7    ppmarit5   ppmsacat    ppreg4\n1   $25,000 to $49,999 Now Married Metro area     South\n2     $150,000 or more Now Married Metro area     South\n3 $100,000 to $149,999 Now Married Metro area     South\n4   $25,000 to $49,999    Divorced Metro area NorthEast\n5   $10,000 to $24,999 Now Married Metro area   MidWest\n6   $75,000 to $99,999 Now Married Metro area   MidWest\n                                                     pprent     ppstaten\n1 Owned or being bought by you or someone in your household      Florida\n2 Owned or being bought by you or someone in your household     Kentucky\n3 Owned or being bought by you or someone in your household      Florida\n4 Owned or being bought by you or someone in your household Pennsylvania\n5 Owned or being bought by you or someone in your household     Michigan\n6 Owned or being bought by you or someone in your household     Missouri\n                               PPWORKA          ppemploy       Q1_a       Q1_b\n1                              Retired       Not working    Approve    Approve\n2                              Retired       Not working    Approve    Approve\n3                              Retired       Not working Disapprove Disapprove\n4                              Retired       Not working    Approve    Approve\n5                              Retired       Not working    Approve    Approve\n6 Employed part-time (by someone else) Working part-time    Approve    Approve\n        Q1_c       Q1_d       Q1_e       Q1_f                 Q2  Q3        Q4\n1 Disapprove    Approve    Approve Disapprove   Not so concerned Yes      Good\n2    Approve    Approve    Approve    Approve Somewhat concerned Yes      Good\n3 Disapprove Disapprove Disapprove    Approve     Very concerned Yes      Poor\n4    Approve    Approve    Approve    Approve Somewhat concerned Yes Excellent\n5    Approve    Approve    Approve    Approve Somewhat concerned Yes Excellent\n6    Approve    Approve Disapprove    Approve   Not so concerned Yes Excellent\n           Q5           QPID ABCAGE                                Contact\n1  Optimistic     A Democrat    65+ No, I am not willing to be interviewed\n2  Optimistic An Independent    65+ No, I am not willing to be interviewed\n3 Pessimistic Something else    65+ No, I am not willing to be interviewed\n4 Pessimistic An Independent    65+    Yes, I am willing to be interviewed\n5  Optimistic     A Democrat    65+ No, I am not willing to be interviewed\n6  Optimistic     A Democrat    65+ No, I am not willing to be interviewed\n  weights_pid\n1      0.6382\n2      0.5493\n3      0.8488\n4      0.8126\n5      0.4994\n6      0.4043\n```\n:::\n\n```{.r .cell-code}\n#view(abcpoll)\nncol(abcpoll)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 31\n```\n:::\n\n```{.r .cell-code}\nnrow(abcpoll)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 527\n```\n:::\n\n```{.r .cell-code}\ndim(abcpoll)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 527  31\n```\n:::\n:::\n\n\n## Tidy Data (as needed)\n\nThe income and household size variables were changed from character data to numerical data. Cell entries for household size *6 or more* will be *6*. Cell entries for income were changed to be the mean value for the income range, so *\\$25000 to \\$49,999* was changed to *\\$37,500*.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nabcpoll1<-as.data.frame.matrix(abcpoll)\nabcpoll1$pphhsize[abcpoll1$pphhsize == '6 or more'] <- '6'\nabcpoll1$ppinc7[abcpoll1$ppinc7 == '$10,000 to $24,999'] <- '17500'\nabcpoll1$ppinc7[abcpoll1$ppinc7 == '$25,000 to $49,999'] <- '37500'\nabcpoll1$ppinc7[abcpoll1$ppinc7 == '$150,000 or more'] <- '150000'\nabcpoll1$ppinc7[abcpoll1$ppinc7 == '$50,000 to $74,999'] <- '62500'\nabcpoll1$ppinc7[abcpoll1$ppinc7 == '$75,000 to $99,999'] <- '87500'\nabcpoll1$ppinc7[abcpoll1$ppinc7 == '$100,000 to $149,999'] <- '124500'\nabcpoll1$ppinc7[abcpoll1$ppinc7 == 'Less than $10,000'] <- '5000'\n#abcpoll1\nabcpoll2 <- transform(abcpoll1,\n                 pphhsize =as.numeric(pphhsize))\nabcpoll3 <- transform(abcpoll2, \n                      ppinc7 = as.numeric(ppinc7))\n#abcpoll3\n```\n:::\n\n\nAre there any variables that require mutation to be usable in your analysis stream? For example, do you need to calculate new values in order to graph them? Can string values be represented numerically? Do you need to turn any variables into factors and reorder for ease of graphics and visualization?\n\nDocument your work here.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nabcpoll4<-abcpoll3%>%\n  mutate(partyid = str_remove(QPID, \"A[n]* \"),\n         partyid = na_if(partyid, \"Skipped\"))%>%\n  select(-QPID)%>%\n  mutate(Q5 = na_if(Q5,\"Skipped\"))\n#abcpoll4\n```\n:::\n\n\n## Visualization with Multiple Dimensions\n\nThe bar graph shows the proportion of gender for each political party.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(abcpoll4$QPID)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n< table of extent 0 >\n```\n:::\n\n```{.r .cell-code}\nggplot(data = abcpoll4) +\ngeom_bar(mapping = aes(x=partyid, fill = ppgender),position = \"fill\") +\n  labs(title = \"Political Party and Gender\", x = \"Political Party\", y = \"Percent\")\n```\n\n::: {.cell-output-display}\n![](NanciKopecky_challenge7_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nThis geom_point graph plots age on the x-axis and income on the y-axis in four different graphs on level of education. Each point is colored in by political party. Because the numerical data is discrete, the graph does not show clear association between age and income. There are no obvious clusters of colored points that would be telling about distribuion of income or age based on education or political party.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = abcpoll3) +\n  geom_point(mapping = aes(x=ppage, y=ppinc7, color=QPID))+\n  facet_wrap(~ppeducat,nrow=1)+\n  labs(title = \"Age and Income by Level of Education and Political Party\", x = \"Age\", y = \"Income\", fill = \"Political Party\")\n```\n\n::: {.cell-output-display}\n![](NanciKopecky_challenge7_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nThis violin graph shows the distrution of income based on gender and political party.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(abcpoll3, aes(x=ppgender, y=ppinc7, fill = ppeducat)) + # fill=name allow to automatically dedicate a color for each group\n  geom_violin()+\n  labs(title = \"Distribution of Income by Gender and Education\", x = \"Gender\", y = \"Income\", fill = \"Education\")\n```\n\n::: {.cell-output-display}\n![](NanciKopecky_challenge7_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "NanciKopecky_challenge7_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}