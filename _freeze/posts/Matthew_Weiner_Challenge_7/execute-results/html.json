{
  "hash": "8787bb2b6d8beb6dd854c353120f2b84",
  "result": {
    "markdown": "---\ntitle: \"Challenge 7\"\nauthor: \"Matthew Weiner\"\ndescription: \"Visualizing Multiple Dimensions\"\ndate: \"04/20/2023\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_7\n  - Matthew_Weiner\n  - abc_poll\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  mutate variables as needed (including sanity checks)\n4)  Recreate at least two graphs from previous exercises, but introduce at least one additional dimension that you omitted before using ggplot functionality (color, shape, line, facet, etc) The goal is not to create unneeded [chart ink (Tufte)](https://www.edwardtufte.com/tufte/), but to concisely capture variation in additional dimensions that were collapsed in your earlier 2 or 3 dimensional graphs.\n   - Explain why you choose the specific graph type\n5) If you haven't tried in previous weeks, work this week to make your graphs \"publication\" ready with titles, captions, and pretty axis labels and other viewer-friendly features\n\n[R Graph Gallery](https://r-graph-gallery.com/) is a good starting point for thinking about what information is conveyed in standard graph types, and includes example R code. And anyone not familiar with Edward Tufte should check out his [fantastic books](https://www.edwardtufte.com/tufte/books_vdqi) and [courses on data visualizaton.](https://www.edwardtufte.com/tufte/courses)\n\n(be sure to only include the category tags for the data you use!)\n\n## Read in data\n\nRead in one (or more) of the following datasets, using the correct R package and command.\n\n  - eggs ⭐\n  - abc_poll ⭐⭐\n  - australian_marriage ⭐⭐\n  - hotel_bookings ⭐⭐⭐\n  - air_bnb  ⭐⭐⭐\n  - us_hh ⭐⭐⭐⭐\n  - faostat ⭐⭐⭐⭐⭐\n\n\n## Introduction\n\nFor this challenge I chose to use the `abc_poll` dataset. \n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nabc <- read_csv(\"_data/abc_poll_2021.csv\")\n```\n:::\n\n\n### Briefly describe the data\n\n::: {.cell}\n\n```{.r .cell-code}\n# num of rows of dataset\nnrow(abc)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 527\n```\n:::\n\n```{.r .cell-code}\n#num of cols of dataset\nncol(abc)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 31\n```\n:::\n\n```{.r .cell-code}\n#name of all the columns\ncolnames(abc)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"id\"              \"xspanish\"        \"complete_status\" \"ppage\"          \n [5] \"ppeduc5\"         \"ppeducat\"        \"ppgender\"        \"ppethm\"         \n [9] \"pphhsize\"        \"ppinc7\"          \"ppmarit5\"        \"ppmsacat\"       \n[13] \"ppreg4\"          \"pprent\"          \"ppstaten\"        \"PPWORKA\"        \n[17] \"ppemploy\"        \"Q1_a\"            \"Q1_b\"            \"Q1_c\"           \n[21] \"Q1_d\"            \"Q1_e\"            \"Q1_f\"            \"Q2\"             \n[25] \"Q3\"              \"Q4\"              \"Q5\"              \"QPID\"           \n[29] \"ABCAGE\"          \"Contact\"         \"weights_pid\"    \n```\n:::\n\n```{.r .cell-code}\nnum_states <- n_distinct(abc$ppstaten)\nprint(num_states)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 49\n```\n:::\n:::\n\n\nThese initial investigations have led me to believe that this dataset represents the data collected about participants in some poll, likely political, as part of the news network ABC. Additionally, we can see that this is a nation-wide poll as almost every state is included in the dataset\n\nThe variables include personal information about the participants such as their education, their household size, their age, etc. There are also variables related to the questions asked to the partipants. \n\n## Tidy Data (as needed)\n\nWhen tidying up this data, we first want to check if there are any missing entries in the dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#count number of missing entries \nsum(is.na(abc))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0\n```\n:::\n:::\n\n\nThe above codeblock shows us that there is no missing data in the typical form.\n\nHowever if we look at the results of the different questions asked to the participants we can see that there is a value called `Skipped`:\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(abc$Q1_a)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n   Approve Disapprove    Skipped \n       329        193          5 \n```\n:::\n:::\n\n\nIn order to clean this data up, we want to instead replace all `Skipped` questions with `NA` instead as this will make any future actions on this dataset easier.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nabc <- abc %>% mutate(across(starts_with(\"Q\"), ~ifelse(.==\"Skipped\", NA, .)))\n\n#sanity check\ntable(abc$Q1_a)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n   Approve Disapprove \n       329        193 \n```\n:::\n\n```{.r .cell-code}\nsum(is.na(abc))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 86\n```\n:::\n:::\n\n\nAnother thing we could fix with this dataset is the format for some of the variables. For instance, the values of the variable QPID are:\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(abc$QPID)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"A Democrat\"     \"An Independent\" \"Something else\" \"A Republican\"  \n[5] NA              \n```\n:::\n:::\n\n\n\nThe articles at the start of each variable name are unnecessary and so we can mutate the dataset in order to remove those:\n\n::: {.cell}\n\n```{.r .cell-code}\nabc <- abc %>%\n  mutate(QPID = gsub(\"^A\\\\s|^An\\\\s\", \"\", QPID))\n\n#sanity check\ntable(abc$QPID)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n      Democrat    Independent     Republican Something else \n           176            168            152             28 \n```\n:::\n:::\n\n\nI am also interested in viewing visualizations about levels of income. However, currently the table of the income is ordered alphabetically instead of by the value of the variable. We want to instead re order this so that the graphs are more meaningful.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnew_levels <- c(\"Less than $10,000\", \"$10,000 to $24,999\", \"$25,000 to $49,999\", \n                \"$50,000 to $74,999\", \"$75,000 to $99,999\", \"$100,000 to $149,999\", \n                \"$150,000 or more\")\n\nabc$ppinc7 <- factor(abc$ppinc7, levels = new_levels)\n\ntable(abc$ppinc7)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n   Less than $10,000   $10,000 to $24,999   $25,000 to $49,999 \n                  17                   32                   82 \n  $50,000 to $74,999   $75,000 to $99,999 $100,000 to $149,999 \n                  85                   69                  105 \n    $150,000 or more \n                 137 \n```\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n## Visualization with Multiple Dimensions\n\nThe first visualization I chose to create is a scatterplot of the income of the responndent and their age, with their gender color coded. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = abc, aes(x = ppinc7, y = ABCAGE, color = ppgender)) +\n  geom_point() +\n  labs(title = \"Age and Income by Gender\",\n       x = \"Income\",\n       y = \"Age\")\n```\n\n::: {.cell-output-display}\n![](Matthew_Weiner_Challenge_7_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\nThis graph shows us that females typically will be making less moey regardless of age, while males often do not make a lot of money while young, but as they age they make significantly more.\n\nThe second visualization I chose to create is a bar graph which displays the education level for each gender.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = abc, aes(x = ppeducat, fill = ppgender)) +\n  geom_bar(position = \"dodge\") +\n  labs(title = \"Distribution of Education Level by Gender\",\n       x = \"Education Level\",\n       y = \"Count\",\n       fill = \"Gender\")\n```\n\n::: {.cell-output-display}\n![](Matthew_Weiner_Challenge_7_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\nAs we can see, males are more likely to have a college level degree, while women are more likely to graduate hiigh school and less likely to stop before high school.\n\n\n",
    "supporting": [
      "Matthew_Weiner_Challenge_7_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}