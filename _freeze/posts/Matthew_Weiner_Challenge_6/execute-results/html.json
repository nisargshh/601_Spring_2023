{
  "hash": "ce5dd6a2a196c8163b1b31f9268668c0",
  "result": {
    "markdown": "---\ntitle: \"Challenge 6\"\nauthor: \"Matthew Weiner\"\ndescription: \"Visualizing Time and Relationships\"\ndate: \"04/13/2023\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_6\n  - fed_rate\n  - Matthew_Weiner\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n \n## Introduction\n\nI chose to use the `fed_rate` dataset for this challenge.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\ndata <- read.csv(\"_data/FedFundsRate.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nncol(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 10\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnrow(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 904\n```\n:::\n:::\n\n\n\n### Briefly describe the data\n\nThe dataset, `FedFundsRate.csv`, describes data collected from 1954 until 2017 of various macroeconomic indicators which are about the federal funds rate. The federal funds rate is the interest rate at which banks will lend money to each other to meet reserve requirements. The data contains 10 columns, 3 of which just display the date. 4 of the remaining variables are related to the federal funds rate (`Federal Funds Upper Target`,`Effective Federal Funds Rate`,`Federal Funds Target Rate`, and `Federal Funds Lower Target`). The final 3 variables are related to other economic statistics (`Unemployment Rate`, `Inflation Rate`, and `Real GPD (Percent Channge)`). \n\n## Tidy Data (as needed)\n\nMany of the column names in the dataset are unnecessarily long so our first step in tidying this dataset is to rename all of those to something shorter and more readable.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n\ndata <- data %>%\n  rename(Target_Rate = `Federal.Funds.Target.Rate`,\n         Upper_Target = `Federal.Funds.Upper.Target`,\n         Lower_Target = `Federal.Funds.Lower.Target`,\n         Effective_Rate = `Effective.Federal.Funds.Rate`,\n         GDP = `Real.GDP..Percent.Change.`,\n         Unemployment_Rate = `Unemployment.Rate`,\n         Inflation_Rate = `Inflation.Rate`)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# sanity check\ncolnames(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"Year\"              \"Month\"             \"Day\"              \n [4] \"Target_Rate\"       \"Upper_Target\"      \"Lower_Target\"     \n [7] \"Effective_Rate\"    \"GDP\"               \"Unemployment_Rate\"\n[10] \"Inflation_Rate\"   \n```\n:::\n:::\n\n\nWe can also check to see if there are any missing values in the data\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(is.na(data))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 3196\n```\n:::\n:::\n\n\nAs we can see, there are a lot of fields with missing values. However, there is at least one NA in every row so we cannot remove rows with missing values or else our dataset will be empty. For now, we will allow the NA's to exist and will just ignore them when completing further investigations.\n\nAnother thing we could do is to mutate the date variables to be a single column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata$date <- as.Date(paste(data$Year, data$Month, data$Day, sep = \"-\"))\ndata <- data %>%\n  select(-Year, -Month, -Day)\n```\n:::\n\n\n\nFinally we can clean up this data by using the `pivot_longer()` command to make the date easier to use for our future investigations.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data %>%\n  pivot_longer(cols = -c(date), \n               names_to = \"Variable\", \n               values_to = \"Value\")\n\nhead(data) #sanity check\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 Ã— 3\n  date       Variable          Value\n  <date>     <chr>             <dbl>\n1 1954-07-01 Target_Rate        NA  \n2 1954-07-01 Upper_Target       NA  \n3 1954-07-01 Lower_Target       NA  \n4 1954-07-01 Effective_Rate      0.8\n5 1954-07-01 GDP                 4.6\n6 1954-07-01 Unemployment_Rate   5.8\n```\n:::\n:::\n\n\n\n## Time Dependent Visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nfed_rate <- data %>% filter(Variable %in% c(\"Target_Rate\", \"Upper_Target\", \"Lower_Target\", \"Effective_Rate\"))\n\nggplot(fed_rate, aes(x = date, y = Value, color = Variable)) + \n    geom_line() +\n    labs(title = \"Federal Funds Rate data over Time\",\n         x = \"Date\",\n         y = \"values\") + theme_bw()\n```\n\n::: {.cell-output-display}\n![](Matthew_Weiner_Challenge_6_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\nI chose to use this line graph as it shows us how closely the effective rate stays to the target over time. \n\n## Visualizing Part-Whole Relationships\n\nFor this part, I chose to investigate how different variables changed alongside the effective federal funds rate. Using the `facet_grid` command allowed me to display these visualizations one after another which makes it easy to view how all variables are impacted over time.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata%>%\n  filter(Variable%in%c(\"Effective_Rate\", \"GDP\", \n                       \"Unnemployment_Rate\", \"Inflation_Rate\"))%>%\nggplot(., aes(x=date, y=Value, color=Variable))+\n  geom_point(size=0)+\n  geom_line()+\n  facet_grid(rows = vars(Variable))\n```\n\n::: {.cell-output-display}\n![](Matthew_Weiner_Challenge_6_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "Matthew_Weiner_Challenge_6_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}