{
  "hash": "4e78ee84a825a4c6641ffab1d4a96fa1",
  "result": {
    "markdown": "---\ntitle: \"Challenge 2\"\nauthor: \"Pooja Shah\"\ndescription: \"Data wrangling: using group() and summarise()\"\ndate: \"04/26/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_2\n  - hotel_bookings\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(summarytools)\nlibrary(dplyr)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to\n\n1)  read in a data set, and describe the data using both words and any supporting information (e.g., tables, etc)\n2)  provide summary statistics for different interesting groups within the data, and interpret those statistics\n\n## Read in the Data\n\nRead in one (or more) of the following data sets, available in the `posts/_data` folder, using the correct R package and command.\n\n-   railroad\\*.csv or StateCounty2012.xls ⭐\n-   FAOstat\\*.csv or birds.csv ⭐⭐⭐\n-   hotel_bookings.csv ⭐⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#read and print the first few rows of data\nbooking <- read.csv(\"_data/hotel_bookings.csv\")\nhead(booking)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         hotel is_canceled lead_time arrival_date_year arrival_date_month\n1 Resort Hotel           0       342              2015               July\n2 Resort Hotel           0       737              2015               July\n3 Resort Hotel           0         7              2015               July\n4 Resort Hotel           0        13              2015               July\n5 Resort Hotel           0        14              2015               July\n6 Resort Hotel           0        14              2015               July\n  arrival_date_week_number arrival_date_day_of_month stays_in_weekend_nights\n1                       27                         1                       0\n2                       27                         1                       0\n3                       27                         1                       0\n4                       27                         1                       0\n5                       27                         1                       0\n6                       27                         1                       0\n  stays_in_week_nights adults children babies meal country market_segment\n1                    0      2        0      0   BB     PRT         Direct\n2                    0      2        0      0   BB     PRT         Direct\n3                    1      1        0      0   BB     GBR         Direct\n4                    1      1        0      0   BB     GBR      Corporate\n5                    2      2        0      0   BB     GBR      Online TA\n6                    2      2        0      0   BB     GBR      Online TA\n  distribution_channel is_repeated_guest previous_cancellations\n1               Direct                 0                      0\n2               Direct                 0                      0\n3               Direct                 0                      0\n4            Corporate                 0                      0\n5                TA/TO                 0                      0\n6                TA/TO                 0                      0\n  previous_bookings_not_canceled reserved_room_type assigned_room_type\n1                              0                  C                  C\n2                              0                  C                  C\n3                              0                  A                  C\n4                              0                  A                  A\n5                              0                  A                  A\n6                              0                  A                  A\n  booking_changes deposit_type agent company days_in_waiting_list customer_type\n1               3   No Deposit  NULL    NULL                    0     Transient\n2               4   No Deposit  NULL    NULL                    0     Transient\n3               0   No Deposit  NULL    NULL                    0     Transient\n4               0   No Deposit   304    NULL                    0     Transient\n5               0   No Deposit   240    NULL                    0     Transient\n6               0   No Deposit   240    NULL                    0     Transient\n  adr required_car_parking_spaces total_of_special_requests reservation_status\n1   0                           0                         0          Check-Out\n2   0                           0                         0          Check-Out\n3  75                           0                         0          Check-Out\n4  75                           0                         0          Check-Out\n5  98                           0                         1          Check-Out\n6  98                           0                         1          Check-Out\n  reservation_status_date\n1              2015-07-01\n2              2015-07-01\n3              2015-07-02\n4              2015-07-02\n5              2015-07-03\n6              2015-07-03\n```\n:::\n:::\n\n\nAdd any comments or documentation as needed. More challenging data may require additional code chunks and documentation.\n\n## Describe the data\n\nUsing a combination of words and results of R commands, can you provide a high level description of the data? Describe as efficiently as possible where/how the data was (likely) gathered, indicate the cases and variables (both the interpretation and any details you deem useful to the reader to fully understand your chosen data).\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndfSummary(booking)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nData Frame Summary  \nbooking  \nDimensions: 119390 x 32  \nDuplicates: 31994  \n\n-----------------------------------------------------------------------------------------------------------------------------------\nNo   Variable                         Stats / Values             Freqs (% of Valid)     Graph                  Valid      Missing  \n---- -------------------------------- -------------------------- ---------------------- ---------------------- ---------- ---------\n1    hotel                            1. City Hotel              79330 (66.4%)          IIIIIIIIIIIII          119390     0        \n     [character]                      2. Resort Hotel            40060 (33.6%)          IIIIII                 (100.0%)   (0.0%)   \n\n2    is_canceled                      Min  : 0                   0 : 75166 (63.0%)      IIIIIIIIIIII           119390     0        \n     [integer]                        Mean : 0.4                 1 : 44224 (37.0%)      IIIIIII                (100.0%)   (0.0%)   \n                                      Max  : 1                                                                                     \n\n3    lead_time                        Mean (sd) : 104 (106.9)    479 distinct values    :                      119390     0        \n     [integer]                        min < med < max:                                  :                      (100.0%)   (0.0%)   \n                                      0 < 69 < 737                                      :                                          \n                                      IQR (CV) : 142 (1)                                : : .                                      \n                                                                                        : : : . .                                  \n\n4    arrival_date_year                Mean (sd) : 2016.2 (0.7)   2015 : 21996 (18.4%)   III                    119390     0        \n     [integer]                        min < med < max:           2016 : 56707 (47.5%)   IIIIIIIII              (100.0%)   (0.0%)   \n                                      2015 < 2016 < 2017         2017 : 40687 (34.1%)   IIIIII                                     \n                                      IQR (CV) : 1 (0)                                                                             \n\n5    arrival_date_month               1. August                  13877 (11.6%)          II                     119390     0        \n     [character]                      2. July                    12661 (10.6%)          II                     (100.0%)   (0.0%)   \n                                      3. May                     11791 ( 9.9%)          I                                          \n                                      4. October                 11160 ( 9.3%)          I                                          \n                                      5. April                   11089 ( 9.3%)          I                                          \n                                      6. June                    10939 ( 9.2%)          I                                          \n                                      7. September               10508 ( 8.8%)          I                                          \n                                      8. March                    9794 ( 8.2%)          I                                          \n                                      9. February                 8068 ( 6.8%)          I                                          \n                                      10. November                6794 ( 5.7%)          I                                          \n                                      [ 2 others ]               12709 (10.6%)          II                                         \n\n6    arrival_date_week_number         Mean (sd) : 27.2 (13.6)    53 distinct values           . : . . .        119390     0        \n     [integer]                        min < med < max:                                    . : : : : : :        (100.0%)   (0.0%)   \n                                      1 < 28 < 53                                       . : : : : : : : : :                        \n                                      IQR (CV) : 22 (0.5)                               : : : : : : : : : :                        \n                                                                                        : : : : : : : : : :                        \n\n7    arrival_date_day_of_month        Mean (sd) : 15.8 (8.8)     31 distinct values     :                      119390     0        \n     [integer]                        min < med < max:                                  : : : . : : . : :      (100.0%)   (0.0%)   \n                                      1 < 16 < 31                                       : : : : : : : : : :                        \n                                      IQR (CV) : 15 (0.6)                               : : : : : : : : : :                        \n                                                                                        : : : : : : : : : :                        \n\n8    stays_in_weekend_nights          Mean (sd) : 0.9 (1)        17 distinct values     :                      119390     0        \n     [integer]                        min < med < max:                                  :                      (100.0%)   (0.0%)   \n                                      0 < 1 < 19                                        :                                          \n                                      IQR (CV) : 2 (1.1)                                : :                                        \n                                                                                        : :                                        \n\n9    stays_in_week_nights             Mean (sd) : 2.5 (1.9)      35 distinct values     :                      119390     0        \n     [integer]                        min < med < max:                                  :                      (100.0%)   (0.0%)   \n                                      0 < 2 < 50                                        :                                          \n                                      IQR (CV) : 2 (0.8)                                :                                          \n                                                                                        :                                          \n\n10   adults                           Mean (sd) : 1.9 (0.6)      14 distinct values     :                      119390     0        \n     [integer]                        min < med < max:                                  :                      (100.0%)   (0.0%)   \n                                      0 < 2 < 55                                        :                                          \n                                      IQR (CV) : 0 (0.3)                                :                                          \n                                                                                        :                                          \n\n11   children                         Mean (sd) : 0.1 (0.4)      0 : 110796 (92.8%)     IIIIIIIIIIIIIIIIII     119386     4        \n     [integer]                        min < med < max:           1 :   4861 ( 4.1%)                            (100.0%)   (0.0%)   \n                                      0 < 0 < 10                 2 :   3652 ( 3.1%)                                                \n                                      IQR (CV) : 0 (3.8)         3 :     76 ( 0.1%)                                                \n                                                                 10 :      1 ( 0.0%)                                               \n\n12   babies                           Mean (sd) : 0 (0.1)        0 : 118473 (99.2%)     IIIIIIIIIIIIIIIIIII    119390     0        \n     [integer]                        min < med < max:           1 :    900 ( 0.8%)                            (100.0%)   (0.0%)   \n                                      0 < 0 < 10                 2 :     15 ( 0.0%)                                                \n                                      IQR (CV) : 0 (12.3)        9 :      1 ( 0.0%)                                                \n                                                                 10 :      1 ( 0.0%)                                               \n\n13   meal                             1. BB                      92310 (77.3%)          IIIIIIIIIIIIIII        119390     0        \n     [character]                      2. FB                        798 ( 0.7%)                                 (100.0%)   (0.0%)   \n                                      3. HB                      14463 (12.1%)          II                                         \n                                      4. SC                      10650 ( 8.9%)          I                                          \n                                      5. Undefined                1169 ( 1.0%)                                                     \n\n14   country                          1. PRT                     48590 (40.7%)          IIIIIIII               119390     0        \n     [character]                      2. GBR                     12129 (10.2%)          II                     (100.0%)   (0.0%)   \n                                      3. FRA                     10415 ( 8.7%)          I                                          \n                                      4. ESP                      8568 ( 7.2%)          I                                          \n                                      5. DEU                      7287 ( 6.1%)          I                                          \n                                      6. ITA                      3766 ( 3.2%)                                                     \n                                      7. IRL                      3375 ( 2.8%)                                                     \n                                      8. BEL                      2342 ( 2.0%)                                                     \n                                      9. BRA                      2224 ( 1.9%)                                                     \n                                      10. NLD                     2104 ( 1.8%)                                                     \n                                      [ 168 others ]             18590 (15.6%)          III                                        \n\n15   market_segment                   1. Aviation                  237 ( 0.2%)                                 119390     0        \n     [character]                      2. Complementary             743 ( 0.6%)                                 (100.0%)   (0.0%)   \n                                      3. Corporate                5295 ( 4.4%)                                                     \n                                      4. Direct                  12606 (10.6%)          II                                         \n                                      5. Groups                  19811 (16.6%)          III                                        \n                                      6. Offline TA/TO           24219 (20.3%)          IIII                                       \n                                      7. Online TA               56477 (47.3%)          IIIIIIIII                                  \n                                      8. Undefined                   2 ( 0.0%)                                                     \n\n16   distribution_channel             1. Corporate                6677 ( 5.6%)          I                      119390     0        \n     [character]                      2. Direct                  14645 (12.3%)          II                     (100.0%)   (0.0%)   \n                                      3. GDS                       193 ( 0.2%)                                                     \n                                      4. TA/TO                   97870 (82.0%)          IIIIIIIIIIIIIIII                           \n                                      5. Undefined                   5 ( 0.0%)                                                     \n\n17   is_repeated_guest                Min  : 0                   0 : 115580 (96.8%)     IIIIIIIIIIIIIIIIIII    119390     0        \n     [integer]                        Mean : 0                   1 :   3810 ( 3.2%)                            (100.0%)   (0.0%)   \n                                      Max  : 1                                                                                     \n\n18   previous_cancellations           Mean (sd) : 0.1 (0.8)      15 distinct values     :                      119390     0        \n     [integer]                        min < med < max:                                  :                      (100.0%)   (0.0%)   \n                                      0 < 0 < 26                                        :                                          \n                                      IQR (CV) : 0 (9.7)                                :                                          \n                                                                                        :                                          \n\n19   previous_bookings_not_canceled   Mean (sd) : 0.1 (1.5)      73 distinct values     :                      119390     0        \n     [integer]                        min < med < max:                                  :                      (100.0%)   (0.0%)   \n                                      0 < 0 < 72                                        :                                          \n                                      IQR (CV) : 0 (10.9)                               :                                          \n                                                                                        :                                          \n\n20   reserved_room_type               1. A                       85994 (72.0%)          IIIIIIIIIIIIII         119390     0        \n     [character]                      2. B                        1118 ( 0.9%)                                 (100.0%)   (0.0%)   \n                                      3. C                         932 ( 0.8%)                                                     \n                                      4. D                       19201 (16.1%)          III                                        \n                                      5. E                        6535 ( 5.5%)          I                                          \n                                      6. F                        2897 ( 2.4%)                                                     \n                                      7. G                        2094 ( 1.8%)                                                     \n                                      8. H                         601 ( 0.5%)                                                     \n                                      9. L                           6 ( 0.0%)                                                     \n                                      10. P                         12 ( 0.0%)                                                     \n\n21   assigned_room_type               1. A                       74053 (62.0%)          IIIIIIIIIIII           119390     0        \n     [character]                      2. D                       25322 (21.2%)          IIII                   (100.0%)   (0.0%)   \n                                      3. E                        7806 ( 6.5%)          I                                          \n                                      4. F                        3751 ( 3.1%)                                                     \n                                      5. G                        2553 ( 2.1%)                                                     \n                                      6. C                        2375 ( 2.0%)                                                     \n                                      7. B                        2163 ( 1.8%)                                                     \n                                      8. H                         712 ( 0.6%)                                                     \n                                      9. I                         363 ( 0.3%)                                                     \n                                      10. K                        279 ( 0.2%)                                                     \n                                      [ 2 others ]                  13 ( 0.0%)                                                     \n\n22   booking_changes                  Mean (sd) : 0.2 (0.7)      21 distinct values     :                      119390     0        \n     [integer]                        min < med < max:                                  :                      (100.0%)   (0.0%)   \n                                      0 < 0 < 21                                        :                                          \n                                      IQR (CV) : 0 (2.9)                                :                                          \n                                                                                        :                                          \n\n23   deposit_type                     1. No Deposit              104641 (87.6%)         IIIIIIIIIIIIIIIII      119390     0        \n     [character]                      2. Non Refund               14587 (12.2%)         II                     (100.0%)   (0.0%)   \n                                      3. Refundable                 162 ( 0.1%)                                                    \n\n24   agent                            1. 9                       31961 (26.8%)          IIIII                  119390     0        \n     [character]                      2. NULL                    16340 (13.7%)          II                     (100.0%)   (0.0%)   \n                                      3. 240                     13922 (11.7%)          II                                         \n                                      4. 1                        7191 ( 6.0%)          I                                          \n                                      5. 14                       3640 ( 3.0%)                                                     \n                                      6. 7                        3539 ( 3.0%)                                                     \n                                      7. 6                        3290 ( 2.8%)                                                     \n                                      8. 250                      2870 ( 2.4%)                                                     \n                                      9. 241                      1721 ( 1.4%)                                                     \n                                      10. 28                      1666 ( 1.4%)                                                     \n                                      [ 324 others ]             33250 (27.8%)          IIIII                                      \n\n25   company                          1. NULL                    112593 (94.3%)         IIIIIIIIIIIIIIIIII     119390     0        \n     [character]                      2. 40                         927 ( 0.8%)                                (100.0%)   (0.0%)   \n                                      3. 223                        784 ( 0.7%)                                                    \n                                      4. 67                         267 ( 0.2%)                                                    \n                                      5. 45                         250 ( 0.2%)                                                    \n                                      6. 153                        215 ( 0.2%)                                                    \n                                      7. 174                        149 ( 0.1%)                                                    \n                                      8. 219                        141 ( 0.1%)                                                    \n                                      9. 281                        138 ( 0.1%)                                                    \n                                      10. 154                       133 ( 0.1%)                                                    \n                                      [ 343 others ]               3793 ( 3.2%)                                                    \n\n26   days_in_waiting_list             Mean (sd) : 2.3 (17.6)     128 distinct values    :                      119390     0        \n     [integer]                        min < med < max:                                  :                      (100.0%)   (0.0%)   \n                                      0 < 0 < 391                                       :                                          \n                                      IQR (CV) : 0 (7.6)                                :                                          \n                                                                                        :                                          \n\n27   customer_type                    1. Contract                 4076 ( 3.4%)                                 119390     0        \n     [character]                      2. Group                     577 ( 0.5%)                                 (100.0%)   (0.0%)   \n                                      3. Transient               89613 (75.1%)          IIIIIIIIIIIIIII                            \n                                      4. Transient-Party         25124 (21.0%)          IIII                                       \n\n28   adr                              Mean (sd) : 101.8 (50.5)   8879 distinct values   :                      119390     0        \n     [numeric]                        min < med < max:                                  :                      (100.0%)   (0.0%)   \n                                      -6.4 < 94.6 < 5400                                :                                          \n                                      IQR (CV) : 56.7 (0.5)                             :                                          \n                                                                                        :                                          \n\n29   required_car_parking_spaces      Mean (sd) : 0.1 (0.2)      0 : 111974 (93.8%)     IIIIIIIIIIIIIIIIII     119390     0        \n     [integer]                        min < med < max:           1 :   7383 ( 6.2%)     I                      (100.0%)   (0.0%)   \n                                      0 < 0 < 8                  2 :     28 ( 0.0%)                                                \n                                      IQR (CV) : 0 (3.9)         3 :      3 ( 0.0%)                                                \n                                                                 8 :      2 ( 0.0%)                                                \n\n30   total_of_special_requests        Mean (sd) : 0.6 (0.8)      0 : 70318 (58.9%)      IIIIIIIIIII            119390     0        \n     [integer]                        min < med < max:           1 : 33226 (27.8%)      IIIII                  (100.0%)   (0.0%)   \n                                      0 < 0 < 5                  2 : 12969 (10.9%)      II                                         \n                                      IQR (CV) : 1 (1.4)         3 :  2497 ( 2.1%)                                                 \n                                                                 4 :   340 ( 0.3%)                                                 \n                                                                 5 :    40 ( 0.0%)                                                 \n\n31   reservation_status               1. Canceled                43017 (36.0%)          IIIIIII                119390     0        \n     [character]                      2. Check-Out               75166 (63.0%)          IIIIIIIIIIII           (100.0%)   (0.0%)   \n                                      3. No-Show                  1207 ( 1.0%)                                                     \n\n32   reservation_status_date          1. 2015-10-21                1461 ( 1.2%)                                119390     0        \n     [character]                      2. 2015-07-06                 805 ( 0.7%)                                (100.0%)   (0.0%)   \n                                      3. 2016-11-25                 790 ( 0.7%)                                                    \n                                      4. 2015-01-01                 763 ( 0.6%)                                                    \n                                      5. 2016-01-18                 625 ( 0.5%)                                                    \n                                      6. 2015-07-02                 469 ( 0.4%)                                                    \n                                      7. 2016-12-07                 450 ( 0.4%)                                                    \n                                      8. 2015-12-18                 423 ( 0.4%)                                                    \n                                      9. 2016-02-09                 412 ( 0.3%)                                                    \n                                      10. 2016-04-04                382 ( 0.3%)                                                    \n                                      [ 916 others ]             112810 (94.5%)         IIIIIIIIIIIIIIIIII                         \n-----------------------------------------------------------------------------------------------------------------------------------\n```\n:::\n:::\n\n\n## Provide Grouped Summary Statistics\n\nConduct some exploratory data analysis, using dplyr commands such as `group_by()`, `select()`, `filter()`, and `summarise()`. Find the central tendency (mean, median, mode) and dispersion (standard deviation, mix/max/quantile) for different subgroups within the data set.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmarket <- booking %>%\n  group_by(market_segment)\nmarket %>%\n  select(hotel, lead_time)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 119,390 × 3\n# Groups:   market_segment [8]\n   market_segment hotel        lead_time\n   <chr>          <chr>            <int>\n 1 Direct         Resort Hotel       342\n 2 Direct         Resort Hotel       737\n 3 Direct         Resort Hotel         7\n 4 Corporate      Resort Hotel        13\n 5 Online TA      Resort Hotel        14\n 6 Online TA      Resort Hotel        14\n 7 Direct         Resort Hotel         0\n 8 Direct         Resort Hotel         9\n 9 Online TA      Resort Hotel        85\n10 Offline TA/TO  Resort Hotel        75\n# ℹ 119,380 more rows\n```\n:::\n\n```{.r .cell-code}\n#summarise for market\nsummarise(market)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 × 1\n  market_segment\n  <chr>         \n1 Aviation      \n2 Complementary \n3 Corporate     \n4 Direct        \n5 Groups        \n6 Offline TA/TO \n7 Online TA     \n8 Undefined     \n```\n:::\n\n```{.r .cell-code}\n#trying different central tendency methods such as mean, median, mode\nbooking %>%\n  summarise(mean_lead_time = mean(lead_time, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  mean_lead_time\n1       104.0114\n```\n:::\n\n```{.r .cell-code}\nbooking %>%\n  summarise(median_stays_in_week_nights = median(stays_in_week_nights, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  median_stays_in_week_nights\n1                           2\n```\n:::\n\n```{.r .cell-code}\nbooking %>%\n  summarise(mode_company = mode(company))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  mode_company\n1    character\n```\n:::\n\n```{.r .cell-code}\n#trying different dispersion methods such as standard deviation, min, max, quantile of lead_time\nbooking %>%\n  summarise(min = min(lead_time), max = max(lead_time), standardDeviation = sd(lead_time, na.rm=TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  min max standardDeviation\n1   0 737          106.8631\n```\n:::\n\n```{.r .cell-code}\nbooking %>%\n  summarise(quantile = quantile(lead_time, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  quantile\n1        0\n2       18\n3       69\n4      160\n5      737\n```\n:::\n:::\n\n\n### Explain and Interpret\n\nBe sure to explain why you choose a specific group. Comment on the interpretation of any interesting differences between groups that you uncover. This section can be integrated with the exploratory data analysis, just be sure it is included.\n\nUsing summarise we were able to see the distinct values of market_segment.\nQuantile gave us the 0th(min), 25th, 50th, 75th and 100th(max) percentile of data.\n",
    "supporting": [
      "PoojaShah_Challenge2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}