{
  "hash": "be0fa00a83d1e9baa9c284d07240b585",
  "result": {
    "markdown": "---\ntitle: \"Challenge 3\"\nauthor: \"Rahul Somu\"\ndescription: \"Tidy Data: Pivoting\"\ndate: \"04/10/2022\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_3\n  - animal_weights\n  - eggs\n  - australian_marriage\n  - usa_households\n  - sce_labor\n\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\n\nRead excel and load it to a dataframe\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_ausmarriage <- read_excel(\"_data/australian_marriage_law_postal_survey_2017_-_response_final.xls\",, sheet= \"Table 2\", skip=7,col_names = c(\"State\", \"Yes Count\", \"Yes %\", \"No Count\", \"No %\", \"Clear Total Count\", \"Clear Count %\", \"Blank\", \"Clear Count\", \"Clear %\", \"Not clear Count\", \"Not clear %\", \"Non-response Count\", \"Non-response %\", \"Total_Count\", \"Total %\"))\n```\n:::\n\n\nCreate a column with Division for the respective state\n\n\n::: {.cell tbl-cap='Example'}\n\n```{.r .cell-code}\ndf_ausmarriage_with_div <- df_ausmarriage %>% \n        select(!c(\"Blank\", \"Clear Count\", \"Clear Total Count\") & !contains(\"%\")) %>%\n        filter(!grepl(\"(Total)\", State)) %>%\n        mutate(Division = case_when(str_ends(State, \"Divisions\") ~ State,\n                                    TRUE ~ NA_character_ )) %>%\n        fill(Division, .direction = \"down\") %>%\n        filter(!is.na(`Total_Count`))\n\ndf_ausmarriage_with_div\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 150 × 7\n   State     `Yes Count` `No Count` `Not clear Count` Non-resp…¹ Total…² Divis…³\n   <chr>           <dbl>      <dbl>             <dbl>      <dbl>   <dbl> <chr>  \n 1 Banks           37736      46343               247      20928  105254 New So…\n 2 Barton          37153      47984               226      24008  109371 New So…\n 3 Bennelong       42943      43215               244      19973  106375 New So…\n 4 Berowra         48471      40369               212      16038  105090 New So…\n 5 Blaxland        20406      57926               220      25883  104435 New So…\n 6 Bradfield       53681      34927               202      17261  106071 New So…\n 7 Calare          54091      35779               285      25342  115497 New So…\n 8 Chifley         32871      46702               263      28180  108016 New So…\n 9 Cook            47505      38804               229      18713  105251 New So…\n10 Cowper          57493      38317               315      25197  121322 New So…\n# … with 140 more rows, and abbreviated variable names ¹​`Non-response Count`,\n#   ²​Total_Count, ³​Division\n```\n:::\n\n```{.r .cell-code}\ndf_select <- select(df_ausmarriage_with_div, \"State\", \"Yes Count\", \"No Count\", \"Total_Count\",\"Division\")\n```\n:::\n\n\nDocument your work here.\n\nPivot the data to help fliter based on Divison/state with yes/No count.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_extend <- df_select %>% \n  pivot_longer(col = c(\"Yes Count\", \"No Count\"),\n               names_to = \"Response\",\n               values_to = \"Count\") %>% \n  mutate(\"Percent\" = Count/Total_Count)\n\nprint(df_extend)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 300 × 6\n   State     Total_Count Division                  Response  Count Percent\n   <chr>           <dbl> <chr>                     <chr>     <dbl>   <dbl>\n 1 Banks          105254 New South Wales Divisions Yes Count 37736   0.359\n 2 Banks          105254 New South Wales Divisions No Count  46343   0.440\n 3 Barton         109371 New South Wales Divisions Yes Count 37153   0.340\n 4 Barton         109371 New South Wales Divisions No Count  47984   0.439\n 5 Bennelong      106375 New South Wales Divisions Yes Count 42943   0.404\n 6 Bennelong      106375 New South Wales Divisions No Count  43215   0.406\n 7 Berowra        105090 New South Wales Divisions Yes Count 48471   0.461\n 8 Berowra        105090 New South Wales Divisions No Count  40369   0.384\n 9 Blaxland       104435 New South Wales Divisions Yes Count 20406   0.195\n10 Blaxland       104435 New South Wales Divisions No Count  57926   0.555\n# … with 290 more rows\n```\n:::\n:::\n\n\nThe data has been transformed based on the yes/no count to help filter for each category and help in analysis.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}