{
  "hash": "f11d42edb05807934049b5b527eb4390",
  "result": {
    "markdown": "---\ntitle: \"Analysis of Mortage and Overall Debt trends \"\nauthor: \"Shantanu Patil\"\ndescription: \"Visualizing Time and Relationships with focus on mortages debt how it rose till 2008 and where it is heading \"\ndate: \"05/03/2023\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_6\n\n  - fed_rate\n  - debt\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(readxl)\nlibrary(lubridate)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndebt_raw <- read_xlsx(\"_data/debt_in_trillions.xlsx\")\nhead(debt_raw, 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 8\n  `Year and Quarter` Mortgage `HE Revolving` Auto …¹ Credi…² Stude…³ Other Total\n  <chr>                 <dbl>          <dbl>   <dbl>   <dbl>   <dbl> <dbl> <dbl>\n1 03:Q1                  4.94          0.242   0.641   0.688   0.241 0.478  7.23\n2 03:Q2                  5.08          0.26    0.622   0.693   0.243 0.486  7.38\n3 03:Q3                  5.18          0.269   0.684   0.693   0.249 0.477  7.56\n4 03:Q4                  5.66          0.302   0.704   0.698   0.253 0.449  8.07\n5 04:Q1                  5.84          0.328   0.72    0.695   0.260 0.446  8.29\n# … with abbreviated variable names ¹​`Auto Loan`, ²​`Credit Card`,\n#   ³​`Student Loan`\n```\n:::\n:::\n\n\n### Briefly describe the data\n\nThis dataset provides a quarterly overview of various types of debt in the United States from Q1 2003 to Q2 2021. The columns represent the following:\n\n1. **Year and Quarter**: The time period in which the data was collected, formatted as year and quarter (e.g., '03:Q1' for the first quarter of 2003).\n2. **Mortgage**: The total outstanding mortgage debt in trillions of US dollars.\n3. **HE Revolving**: The total outstanding home equity revolving debt in trillions of US dollars.\n4. **Auto Loan**: The total outstanding auto loan debt in trillions of US dollars.\n5. **Credit Card**: The total outstanding credit card debt in trillions of US dollars.\n6. **Student Loan**: The total outstanding student loan debt in trillions of US dollars.\n7. **Other**: The total outstanding debt from other sources in trillions of US dollars.\n8. **Total**: The total outstanding debt, including all the above categories, in trillions of US dollars.\n\nThe dataset provides valuable insights into the trends and composition of debt in the United States across different loan types and time periods.\n\n\n\n## Tidy Data (as needed)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Tidying the data\ndebt_tidy <- debt_raw %>%\n  rename(year_quarter = `Year and Quarter`) %>%\n  separate(year_quarter, into = c(\"year\", \"quarter\"), sep = \":\") %>%\n  mutate(year = as.integer(year) + 2000,\n         quarter = as.integer(substr(quarter, 2, 2))) %>%\n  gather(\"debt_type\", \"amount\", Mortgage:Total)\n\nhead(debt_tidy, 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 4\n   year quarter debt_type amount\n  <dbl>   <int> <chr>      <dbl>\n1  2003       1 Mortgage    4.94\n2  2003       2 Mortgage    5.08\n3  2003       3 Mortgage    5.18\n4  2003       4 Mortgage    5.66\n5  2004       1 Mortgage    5.84\n```\n:::\n:::\n\n\nThe data has been cleaned up. The \"Year and Quarter\" column has been divided into \"year\" and \"quarter\" columns, with the year transformed to four digits. \n\nThe debt types are now kept in a single column named \"debt_type,\" and the amounts are stored in the \"amount\" column. \n\nThis format facilitates better data analysis and visualization.\n\n\n## Time Dependent Visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filter the data to include only Mortgage debt\ndebt_mortgage <- debt_tidy %>%\n    filter(debt_type == \"Mortgage\") %>%\n    select(year, quarter, amount)\n\n# Time Dependent Visualization for Mortgage debt\nggplot(debt_mortgage, aes(x = year + (quarter - 1) / 4, y = amount)) +\n    geom_line(size = 1) +\n    scale_x_continuous(breaks = seq(2003, 2021, 2), limits = c(2003, 2021)) +\n    scale_y_continuous(labels = scales::comma) +\n    labs(title = \"U.S. Mortgage Debt (2003 - 2021)\",\n         x = \"Year\",\n         y = \"Debt Amount (Trillions of US Dollars)\") +\n    theme_minimal()\n```\n\n::: {.cell-output-display}\n![](ShantanuPatil_challenge6_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\nI have created a time-dependent visualization for mortgage debt.\nI wanted to analyze how has the mortage debt been evolving, as I remeber that the financial crisis of 2008, sent global shockwaves through out the world economy.\nI first filter the data to include only mortgage debt and select the relevant columns (year, quarter, and amount). Then ggplot2 is usedd to create a line chart that shows the trend of mortgage debt from 2003 to 2021. \n\nThe line chart is chosen because it effectively shows the trend of mortgage debt over time, making it easy to identify patterns or changes in the data.\n\nFrom my analysis we can clearly see that the mortgages reached a peak during 2008 and they started coming down till the first quarter of 2013. The debt surpased the earlier peak of 2008 around the last quarted of 2018 and has kept going up, which shows that the mortages have kept on increasing and is a bad sign for the overall economy.\n\n## Visualizing Part-Whole Relationships\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndebt_tidy %>%\n  filter(debt_type != \"Total\") %>%\n  mutate(debt_type = fct_relevel(debt_type, \"Mortgage\", \"Auto Loan\", \"Credit Card\", \"HE Revolving\", \"Other\", \"Student Loan\")) %>%\n  ggplot(aes(x = year + (quarter - 1) / 4, y = amount, fill = debt_type)) +\n  geom_area(position = \"stack\", alpha = 0.8) +\n  theme_bw() +\n  scale_y_continuous(labels = scales::comma) +\n  labs(title = \"Debt Type Breakdown by Quarter (Stacked Area Chart)\",\n       x = \"Year\",\n       y = \"Debt Amount (Trillions of US Dollars)\",\n       fill = \"Debt Type\") \n```\n\n::: {.cell-output-display}\n![](ShantanuPatil_challenge6_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nI stacked area chart to visualize the part-whole relationship between different debt types over time. \n\nFirst,the data is filtered to exclude the \"Total\" debt type and reorder the debt types according to their contribution to the total debt. \n\nThe stacked area chart was chosen because it is an effective approach to display the part-whole relationship between debt categories, allowing us to quickly visualize each debt type's contribution to the overall debt over time. This graphic also helps in spotting data trends and patterns, such as the growth or reduction of each debt kind over time. We can see that mortage loans are the biggest debt type, which is keeping on increasing.",
    "supporting": [
      "ShantanuPatil_challenge6_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}