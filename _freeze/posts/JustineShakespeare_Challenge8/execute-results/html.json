{
  "hash": "1adf61b97b5073740da5e677531e3d7c",
  "result": {
    "markdown": "---\ntitle: \"Challenge 8: SNL\"\nauthor: \"Justine Shakespeare\"\ndescription: \"Joining Data\"\ndate: \"04/26/2023\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_8\n  - snl\n  - Justine Shakespeare\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(lubridate)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Load and tidy the data\n\nWe'll use the SNL data for today's challenge. First we'll load each of the three csv files, casts, actors, and seasons. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the datasets\ncasts <- read_csv(\"_data/snl_casts.csv\", skip = 1, col_names = c(\"aid\", \"sid\", \"featured\", \"cast_first_epid\", \"cast_last_epid\", \"update_anchor\", \"cast_n_epid\", \"season_fraction\"))\n  \nactors <- read_csv(\"_data/snl_actors.csv\")\n  \nseasons <- read_csv(\"_data/snl_seasons.csv\", skip = 1, col_names = c(\"sid\", \"year\", \"seasons_first_epid\", \"seasons_last_epid\", \"seasons_n_epid\"))\n```\n:::\n\n\nLet's take a closer look at the actors dataset and prepare it for joining.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(actors)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 2,306\nColumns: 4\n$ aid    <chr> \"Kate McKinnon\", \"Alex Moffat\", \"Ego Nwodim\", \"Chris Redd\", \"Ke…\n$ url    <chr> \"/Cast/?KaMc\", \"/Cast/?AlMo\", \"/Cast/?EgNw\", \"/Cast/?ChRe\", \"/C…\n$ type   <chr> \"cast\", \"cast\", \"cast\", \"cast\", \"cast\", \"guest\", \"guest\", \"cast…\n$ gender <chr> \"female\", \"male\", \"unknown\", \"male\", \"male\", \"andy\", \"male\", \"f…\n```\n:::\n:::\n\nThis contains information about cast members and guests on SNL including the persons gender, whether they are a cast member or guest, and a URL. For the purpose of this analysis, we only need the variables `aid` and `gender`. We can use the `type` variable to filter for only cast members.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncast_only <- actors %>% \n  filter(type == \"cast\") %>% \n  select(aid, gender)\n\nglimpse(cast_only)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 154\nColumns: 2\n$ aid    <chr> \"Kate McKinnon\", \"Alex Moffat\", \"Ego Nwodim\", \"Chris Redd\", \"Ke…\n$ gender <chr> \"female\", \"male\", \"unknown\", \"male\", \"male\", \"female\", \"male\", …\n```\n:::\n:::\n\n\nLet's take a closer look at the gender values to ensure that we don't have any missing values. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(cast_only$gender)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n female    male unknown \n     52     100       2 \n```\n:::\n\n```{.r .cell-code}\ncast_only %>% \n  filter(gender == \"unknown\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 2\n  aid            gender \n  <chr>          <chr>  \n1 Ego Nwodim     unknown\n2 Punkie Johnson unknown\n```\n:::\n:::\n\n\nIt looks like there are two cast members with \"unknown\" gender. I googled the two names to confirm their pronouns and gender. Now we can recode those values in the data. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ncast_only$gender <- ifelse(cast_only$aid == \"Ego Nwodim\", replace(cast_only$gender, cast_only$gender == \"unknown\", \"female\"), cast_only$gender)\ncast_only$gender <- ifelse(cast_only$aid == \"Punkie Johnson\", replace(cast_only$gender, cast_only$gender == \"unknown\", \"female\"), cast_only$gender)\n```\n:::\n\n\nSince we want to keep all of the variables in the casts data, we can join that data to the casts_only dataset we've just created without removing any variables.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Join the datasets using left_join()\ncast_actors <- left_join(cast_only, casts, by = \"aid\")\n\n\nglimpse(cast_actors)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 607\nColumns: 9\n$ aid             <chr> \"Kate McKinnon\", \"Kate McKinnon\", \"Kate McKinnon\", \"Ka…\n$ gender          <chr> \"female\", \"female\", \"female\", \"female\", \"female\", \"fem…\n$ sid             <dbl> 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 42, 43, 44, 45…\n$ featured        <lgl> TRUE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, …\n$ cast_first_epid <dbl> 20120407, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ cast_last_epid  <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ update_anchor   <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…\n$ cast_n_epid     <dbl> 5, 21, 21, 21, 21, 21, 21, 21, 18, 17, 21, 21, 21, 18,…\n$ season_fraction <dbl> 0.2272727, 1.0000000, 1.0000000, 1.0000000, 1.0000000,…\n```\n:::\n:::\n\nWe'll join this with the seasons data and then continue cleaning the data. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nsca <- left_join(cast_actors, seasons, by = \"sid\")\n```\n:::\n\nThere are several date variables that are currently stores as numeric, we will changes those to dates.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# clean up date data\nsca$cast_first_epid <- ymd(sca$cast_first_epid)\nsca$cast_last_epid <- ymd(sca$cast_last_epid)\nsca$seasons_first_epid <- ymd(sca$seasons_first_epid)\nsca$seasons_last_epid <- ymd(sca$seasons_last_epid)\n\nglimpse(sca)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 607\nColumns: 13\n$ aid                <chr> \"Kate McKinnon\", \"Kate McKinnon\", \"Kate McKinnon\", …\n$ gender             <chr> \"female\", \"female\", \"female\", \"female\", \"female\", \"…\n$ sid                <dbl> 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 42, 43, 44,…\n$ featured           <lgl> TRUE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALS…\n$ cast_first_epid    <date> 2012-04-07, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ cast_last_epid     <date> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ update_anchor      <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FA…\n$ cast_n_epid        <dbl> 5, 21, 21, 21, 21, 21, 21, 21, 18, 17, 21, 21, 21, …\n$ season_fraction    <dbl> 0.2272727, 1.0000000, 1.0000000, 1.0000000, 1.00000…\n$ year               <dbl> 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 201…\n$ seasons_first_epid <date> 2011-09-24, 2012-09-15, 2013-09-28, 2014-09-27, 20…\n$ seasons_last_epid  <date> 2012-05-19, 2013-05-18, 2014-05-17, 2015-05-16, 20…\n$ seasons_n_epid     <dbl> 22, 21, 21, 21, 21, 21, 21, 21, 18, 17, 21, 21, 21,…\n```\n:::\n:::\n\n## Briefly describe the data\n\nThis data provides information on the casts of SNL from 1975 to 2020. Each row of this newly created dataframe represents a unique actor-season combination with information on the actor and the SNL seasons they have been on. Each row contains information about the actor's gender, whether they were featured in a particular season, the date of their first episode, the date of their last episode, the number of episodes they have been in, the fraction of each season they've been in, a URL for that actor, whether they were a member of the cast or a guest on the show, and whether they were an anchor on weekend update. Each row also contains information about the seasons they have been on, including the year of that season, the dates of the first and last episode of that seasonl, and the total number of episodes in that season. \n\n## Data exploration\n\nNow let's explore the data a little. First we'll take a look at some summary statistics related to seasons, including the range of years covered in this data...\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# range of seasons\nrange(sca$year, na.rm = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1975 2020\n```\n:::\n:::\n\n\n...a time series graph that shows the number of episodes per season...\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# year with the most episodes in a season\nsca %>% \n  group_by(year, seasons_n_epid) %>% \n  ggplot(aes(x = year, y = seasons_n_epid)) + geom_line() +\n  labs(title = \"Number of episodes per season on SNL\", \n       x = \"Year\", y = \"Number of episodes per season\")\n```\n\n::: {.cell-output-display}\n![](JustineShakespeare_Challenge8_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\nAnd the minimum, maximum, and median length of seasons. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# min, median, and max length of seasons\nsca %>% \n  summarize(min = min(seasons_n_epid, na.rm = TRUE), median = median(seasons_n_epid, na.rm = TRUE), max = max(seasons_n_epid, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 3\n    min median   max\n  <dbl>  <dbl> <dbl>\n1    12     20    24\n```\n:::\n:::\n\n\nThe following visualization is a time series graph that shows the number of women and men on each SNL cast. It shows that there have always been more men than women on each season but in recent years it has come closer to reaching parity.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nseason_gender <- sca %>% \n  group_by(sid, year) %>% \n  count(gender)\n\nseason_gender %>%\n  ggplot(aes(x=year, y=n, group=gender, color=gender)) + \n  geom_line() +\n  scale_color_manual(values = c(\"#E86C4A\", \"#70C1B3\")) +\n  labs(title = \"Number of women and men on each SNL cast\", \n       x = \"Year\", y = \"Count of Cast Members\", color = \"Gender\") +\n  theme_bw() + ylim(0,13)\n```\n\n::: {.cell-output-display}\n![](JustineShakespeare_Challenge8_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\nThe following table shows which cast members worked the most seasons.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsca %>% \n  group_by(aid) %>% \n  count() %>% \n  arrange(desc(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 154 × 2\n# Groups:   aid [154]\n   aid                 n\n   <chr>           <int>\n 1 Kenan Thompson     18\n 2 Darrell Hammond    14\n 3 Seth Meyers        13\n 4 Al Franken         11\n 5 Fred Armisen       11\n 6 Kate McKinnon      10\n 7 Tim Meadows        10\n 8 Aidy Bryant         9\n 9 Bobby Moynihan      9\n10 Cecily Strong       9\n# … with 144 more rows\n```\n:::\n:::\n\n\nThis graph shows the cast members who have anchored the Weekend Update on SNL, how many season they have anchored, and the gender of each cast member. Seth Meyers and Colin Jost have hosted the Weekend Update the most seasons.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsca %>% \n  filter(update_anchor == \"TRUE\") %>% \n  group_by(aid, gender) %>% \n  count() %>% \n  ggplot(aes(x = aid, y = n, fill = gender)) + geom_col() +\n  scale_fill_manual(values = c(\"#E86C4A\", \"#70C1B3\")) +\n  theme_bw() +\n  theme(axis.text.x = element_text(face = \"bold\", angle = 90), \n        axis.text.y = element_text(face = \"bold\", angle = 90)) +\n  labs(title = \"Weekend Update Anchors on SNL\", \n       x = \" \", y = \"Number of seasons\", fill = \"Gender\")\n```\n\n::: {.cell-output-display}\n![](JustineShakespeare_Challenge8_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::",
    "supporting": [
      "JustineShakespeare_Challenge8_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}